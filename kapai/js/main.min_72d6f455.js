var __reflect=this&&this.__reflect||function(e,n,t){e.__class__=n,t?t.push(n):t=[n],e.__types__=e.__types__?t.concat(e.__types__):t},__extends=this&&this.__extends||function(e,n){function t(){this.constructor=e}for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);t.prototype=n.prototype,e.prototype=new t},__awaiter=this&&this.__awaiter||function(e,n,t,i){return new(t||(t=Promise))(function(a,r){function o(e){try{s(i.next(e))}catch(n){r(n)}}function g(e){try{s(i["throw"](e))}catch(n){r(n)}}function s(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(o,g)}s((i=i.apply(e,n||[])).next())})},__generator=this&&this.__generator||function(e,n){function t(e){return function(n){return i([e,n])}}function i(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,r&&(o=r[2&t[0]?"return":t[0]?"throw":"next"])&&!(o=o.call(r,t[1])).done)return o;switch(r=0,o&&(t=[0,o.value]),t[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,r=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(e,s)}catch(i){t=[6,i],r=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a,r,o,g,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return g={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g},SceneManger=function(){function e(){this.zhujiemian=new zhujiemian,this.wanjiachangjing=new wanjiachangjing,this.yingxiongchangjing=new yingxiongchangjing,this.wupinchangjing=new wupinchangjing,this.guanyuchangjing=new guanyuchangjing}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.addScene=function(e,n){n?n.addChild(e):this.root.addChild(e)},e.prototype.changeScene=function(e,n){n?(n.removeChildren(),n.addChild(e)):(this.root.removeChildren(),this.root.addChild(e))},e.prototype.removeScene=function(e,n){n?n.removeChildren():this.root.removeChild(e)},e.prototype.removeScene2=function(e,n){this.root.removeChild(e)},e.prototype.setSrage=function(e){this.root=e},e}();__reflect(SceneManger.prototype,"SceneManger");var Anniu=function(e){function n(){var n=e.call(this)||this;return n.skinName="AnniuSkin",n.anniu.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){egret.Tween.get(n.anniu).to({scaleX:.9,scaleY:.9},50,egret.Ease.sineOut)},n),n.anniu.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,function(){egret.Tween.get(n.anniu).to({scaleX:1,scaleY:1},100,egret.Ease.sineOut)},n),n.anniu.addEventListener(egret.TouchEvent.TOUCH_END,function(){egret.Tween.get(n.anniu).to({scaleX:1,scaleY:1},100,egret.Ease.sineOut)},n),n}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.anniu.anchorOffsetX=this.anniu.width/2,this.anniu.anchorOffsetY=this.anniu.height/2,this.anniu.x=this.anniu.width/2,this.anniu.y=this.anniu.height/2},n.prototype.init=function(e){this.anniu.texture=RES.getRes(e)},n}(eui.Component);__reflect(Anniu.prototype,"Anniu"),window.Anniu=Anniu;var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,n,t){function i(i){n.call(t,i,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?i(a):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var guanyuchangjing=function(e){function n(){var n=e.call(this)||this;return n.skinName="guanyuchangjingSkin",n.dilan.mask=n.zhedi,n.kuang.mask=n.zhekuang,n.guanbi.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManger.getInstance().removeScene2(SceneManger.getInstance().guanyuchangjing,SceneManger.getInstance().zhujiemian.sceneGroup),SceneManger.getInstance().zhujiemian.anniu.weixuanzhong()},n),n}return __extends(n,e),n.prototype.kuangfangda=function(){this.kuang.scaleX=.1,this.kuang.scaleY=.1;var e=egret.Tween.get(this.kuang);e.to({scaleX:1,scaleY:1},250,egret.Ease.sineOut)},n}(eui.Component);__reflect(guanyuchangjing.prototype,"guanyuchangjing"),window.guanyuchangjing=guanyuchangjing;var jiemian=function(e){function n(){var n=e.call(this)||this;return n.skinName="jieMianSkin",n.touchChildren=!1,n}return __extends(n,e),n.prototype.init=function(e){this.icon.texture=RES.getRes(e)},n}(eui.Component);__reflect(jiemian.prototype,"jiemian"),window.jiemian=jiemian;var LoadingUI=function(e){function n(){var n=e.call(this)||this;return n.addEventListener(egret.Event.ADDED_TO_STAGE,n.createView,n),n}return __extends(n,e),n.prototype.createView=function(){this.bg=new eui.Image(RES.getRes("loading_jpg")),this.addChild(this.bg),this.icon=new eui.Image,this.icon.texture=RES.getRes("loading2_png"),this.icon.anchorOffsetX=this.icon.width/2,this.icon.anchorOffsetY=this.icon.height/2,this.icon.x=this.stage.stageWidth/2,this.icon.y=this.stage.stageHeight/2,this.addChild(this.icon),this.icon.addEventListener(egret.Event.ENTER_FRAME,this.onzhuan,this),this.textField=new egret.TextField,this.addChild(this.textField),this.textField.anchorOffsetY=this.textField.height/2,this.textField.width=480,this.textField.y=this.stage.stageHeight/2-this.textField.height,this.textField.size=20,this.textField.textAlign=egret.HorizontalAlign.CENTER,this.textField.verticalAlign=egret.VerticalAlign.MIDDLE,console.log(this.textField)},n.prototype.onzhuan=function(){this.icon.rotation+=5},n.prototype.onProgress=function(e,n){this.textField.text=e+"/"+n},n}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var n=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",n),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},n.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=t.sent(),[4,platform.login()];case 3:return t.sent(),[4,platform.getUserInfo()];case 4:return n=t.sent(),console.log(n),[2]}})})},n.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return t.sent(),[4,RES.loadGroup("loading")];case 2:return t.sent(),e=new LoadingUI,this.stage.addChild(e),[4,this.loadTheme()];case 3:return t.sent(),[4,RES.loadGroup("preload",0,e)];case 4:return t.sent(),this.stage.removeChild(e),[3,6];case 5:return n=t.sent(),console.error(n),[3,6];case 6:return[2]}})})},n.prototype.loadTheme=function(){var e=this;return new Promise(function(n,t){var i=new eui.Theme("resource/default.thm.json",e.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){n()},e)})},n.prototype.createGameScene=function(){this.addChild(SceneManger.getInstance().zhujiemian),SceneManger.getInstance().setSrage(SceneManger.getInstance().zhujiemian.sceneGroup)},n}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var anNiuZu=function(e){function n(){var n=e.call(this)||this;return n.skinName="anNiuZuSkin",n.init(),n}return __extends(n,e),n.prototype.init=function(){this.wanjia.init("mbtnPlayer_png"),this.yingxiong.init("mbtnHero_png"),this.wupin.init("mbtnGoods_png"),this.guanyu.init("mbtnAbout_png")},n.prototype.xuanzhong=function(e){for(var n=0;n<this.anniuzu.numChildren;n++){var t=this.anniuzu.getChildAt(n);t.currentState="Up"}var i=this.anniuzu.getChildAt(e);i.currentState="Dn"},n.prototype.weixuanzhong=function(){for(var e=0;e<this.anniuzu.numChildren;e++){var n=this.anniuzu.getChildAt(e);n.currentState="Up"}},n}(eui.Component);__reflect(anNiuZu.prototype,"anNiuZu"),window.anNiuZu=anNiuZu;var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,n,t,i){function a(e){n.call(i,e)}function r(n){n.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),t.call(i))}var o=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){n.call(i,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,t){window.JSONParseClass.setData(e),egret.callLater(function(){n.call(i,generateEUI2)},o)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var g=e.split("/");g.pop();var s=g.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){n.call(i,generateJSON.paths[e])},this):RES.getResByUrl(s,function(t){window.JSONParseClass.setData(t),egret.callLater(function(){n.call(i,generateJSON.paths[e])},o)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){n.call(i,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var wanjiachangjing=function(e){function n(){var n=e.call(this)||this;return n.skinName="wanjiachangjingSkin",n.anniufanhui.init("btnRetum_png"),n.zhuangbei.init("btnEquip_png"),n.qianghua.init("btnStrengthen_png"),n.init(),n}return __extends(n,e),n.prototype.init=function(){this.anniufanhui.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManger.getInstance().removeScene(SceneManger.getInstance().wanjiachangjing,SceneManger.getInstance().zhujiemian.sceneGroup),SceneManger.getInstance().zhujiemian.anniu.weixuanzhong()},this)},n.prototype.createChildren=function(){e.prototype.createChildren;var n=[{image:"skillIcon01_png",name:"炫龙幻杀"},{image:"skillIcon02_png",name:"魔魂恬宙"},{image:"skillIcon03_png",name:"炫龙幻杀"},{image:"skillIcon04_png",name:"炫龙幻杀"},{image:"skillIcon05_png",name:"炫龙幻杀"},{image:"skillIcon06_png",name:"炫龙幻杀"},{image:"skillIcon07_png",name:"炫龙幻杀"}],t=new eui.ArrayCollection(n);this.list.dataProvider=t,this.list.itemRenderer=zhuangbei,this.zhuangbeitiao.horizontalScrollBar.autoVisibility=!1},n}(eui.Component);__reflect(wanjiachangjing.prototype,"wanjiachangjing"),window.wanjiachangjing=wanjiachangjing;var wupinchangjing=function(e){function n(){var n=e.call(this)||this;return n.skinName="wupinchangjingSkin",n.init(),n}return __extends(n,e),n.prototype.init=function(){this.fanhui.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManger.getInstance().removeScene(SceneManger.getInstance().wupinchangjing,SceneManger.getInstance().zhujiemian.sceneGroup),SceneManger.getInstance().zhujiemian.anniu.weixuanzhong()},this)},n.prototype.createChildren=function(){e.prototype.createChildren;var n=[{touxiang:"goods01_png",mingzi:"魔法石",pingjia:"法力加成+3"},{touxiang:"goods02_png",mingzi:"魔法石",pingjia:"法力加成+3"},{touxiang:"goods03_png",mingzi:"魔法石",pingjia:"法力加成+3"},{touxiang:"goods04_png",mingzi:"魔法石",pingjia:"法力加成+3"},{touxiang:"goods05_png",mingzi:"魔法石",pingjia:"法力加成+3"},{touxiang:"goods06_png",mingzi:"魔法石",pingjia:"法力加成+3"},{touxiang:"goods07_png",mingzi:"魔法石",pingjia:"法力加成+3"}],t=new eui.ArrayCollection(n);this.list.dataProvider=t,this.list.itemRenderer=wupinliebiao,this.wupinliebiao.verticalScrollBar.autoVisibility=!1},n}(eui.Component);__reflect(wupinchangjing.prototype,"wupinchangjing"),window.wupinchangjing=wupinchangjing;var wupinliebiao=function(e){function n(){var n=e.call(this)||this;return n.skinName="wupinliebiaoSkin",n}return __extends(n,e),Object.defineProperty(n.prototype,"data",{set:function(e){this.value=e,this.initFromData(this.value)},enumerable:!0,configurable:!0}),n.prototype.initFromData=function(e){this.mingcheng.text=e.mingzi,this.neirong.text=e.pingjia,this.tupian.texture=RES.getRes(e.touxiang)},n}(eui.ItemRenderer);__reflect(wupinliebiao.prototype,"wupinliebiao"),window.wupinliebiao=wupinliebiao;var yingxiongchangjing=function(e){function n(){var n=e.call(this)||this;return n.skinName="yingxiongchangjingSkin",n.init(),n.anniufanhui.init("btnRetum_png"),n.anniuqueding.init("btnOK_png"),n}return __extends(n,e),n.prototype.init=function(){var e=this;this.anniufanhui.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManger.getInstance().removeScene(SceneManger.getInstance().yingxiongchangjing,SceneManger.getInstance().zhujiemian.sceneGroup),SceneManger.getInstance().zhujiemian.anniu.weixuanzhong()},this),this.anniuqueding.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){SceneManger.getInstance().removeScene(SceneManger.getInstance().yingxiongchangjing,SceneManger.getInstance().zhujiemian.sceneGroup),SceneManger.getInstance().zhujiemian.anniu.weixuanzhong();for(var n=e.list.dataProvider,t=[],i=0;i<n.length;i++){var a=n.getItemAt(i);a.isSelected&&t.push(a.mingzi)}e.showInfo(t)},this)},n.prototype.showInfo=function(e){var n="你选择了: ";0===e.length?n="厉害了什么都不选":n+=e.toString(),console.log("进来了");var t=new egret.Bitmap;t.texture=RES.getRes("toast-bg_png"),SceneManger.getInstance().zhujiemian.addChild(t),t.x=SceneManger.getInstance().zhujiemian.stage.width/2-t.width/2,t.y=500,t.height=40;var i=new egret.TextField;i.text=n,i.size=20,SceneManger.getInstance().zhujiemian.addChild(i),i.x=SceneManger.getInstance().zhujiemian.stage.width/2-i.width/2,i.y=510,i.height=40;var a=new egret.Timer(1e3,1);a.start(),a.addEventListener(egret.TimerEvent.TIMER_COMPLETE,function(e){var n=egret.Tween.get(i);n.to({alpha:0},500,egret.Ease.sineOut);var a=egret.Tween.get(t);a.to({alpha:0},500,egret.Ease.sineOut).call(function(){SceneManger.getInstance().zhujiemian.removeChild(i),SceneManger.getInstance().zhujiemian.removeChild(t)})},this)},n.prototype.createChildren=function(){e.prototype.createChildren;var n=[{touxiang:"heros01_png",mingzi:"炫龙幻杀",pingjia:"评价：离了我你不行的",isSelected:!1},{touxiang:"heros02_png",mingzi:"炫龙幻杀",pingjia:"评价：离了我你不行的",isSelected:!1},{touxiang:"heros03_png",mingzi:"炫龙幻杀",pingjia:"评价：离了我你不行的",isSelected:!1},{touxiang:"heros04_png",mingzi:"炫龙幻杀",pingjia:"评价：离了我你不行的",isSelected:!1},{touxiang:"heros05_png",mingzi:"炫龙幻杀",pingjia:"评价：离了我你不行的",isSelected:!1},{touxiang:"heros06_png",mingzi:"炫龙幻杀",pingjia:"评价：离了我你不行的",isSelected:!1},{touxiang:"heros07_png",mingzi:"炫龙幻杀",pingjia:"评价：离了我你不行的",isSelected:!1}];this.yingxiongshuju=n;var t=new eui.ArrayCollection(n);this.list.dataProvider=t,this.list.itemRenderer=yingxiongliebiao,this.yingxiongliebiao.verticalScrollBar.autoVisibility=!1},n}(eui.Component);__reflect(yingxiongchangjing.prototype,"yingxiongchangjing"),window.yingxiongchangjing=yingxiongchangjing;var yingxiongliebiao=function(e){function n(){var n=e.call(this)||this;return n.skinName="yingxiongliebiaoSkin",n.addEventListener(eui.UIEvent.CREATION_COMPLETE,n.onComplete,n),n}return __extends(n,e),Object.defineProperty(n.prototype,"data",{set:function(e){this.value=e,this.initFromData(e)},enumerable:!0,configurable:!0}),n.prototype.initFromData=function(e){console.log(e),this.mingzi.text=e.mingzi,this.pingjia.text=e.pingjia,this.touxiang.texture=RES.getRes(e.touxiang)},n.prototype.onComplete=function(){var e=this;this.xuanze.addEventListener(eui.UIEvent.CHANGE,function(n){var t=SceneManger.getInstance().yingxiongchangjing.yingxiongshuju[e.itemIndex];t.isSelected=e.xuanze.selected,console.log(t)},this)},n.prototype.dataChanged=function(){this.xuanze.selected=this.data.isSelected},n}(eui.ItemRenderer);__reflect(yingxiongliebiao.prototype,"yingxiongliebiao"),window.yingxiongliebiao=yingxiongliebiao;var zhuangbei=function(e){function n(){var n=e.call(this)||this;return n.skinName="zhuangbeiSkin",n}return __extends(n,e),Object.defineProperty(n.prototype,"data",{set:function(e){this.value=e,this.initFromData(e)},enumerable:!0,configurable:!0}),n.prototype.initFromData=function(e){this.nameLab.text=e.name,this.icon.texture=RES.getRes(e.image)},n}(eui.ItemRenderer);__reflect(zhuangbei.prototype,"zhuangbei"),window.zhuangbei=zhuangbei;var zhujiemian=function(e){function n(){var n=e.call(this)||this;return n.skinName="zhujiemianSkin",n}return __extends(n,e),n.prototype.createChildren=function(){var n=this;e.prototype.createChildren.call(this),this.index2=this.index,this.anniu.anniuzu.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){switch(console.log(e.target),n.index=n.anniu.anniuzu.getChildIndex(e.target),n.anniu.xuanzhong(n.index),n.index){case 0:n.sceneGroup.x=-480,SceneManger.getInstance().changeScene(SceneManger.getInstance().wanjiachangjing),egret.Tween.get(n.sceneGroup).to({x:0},500,egret.Ease.sineOut);break;case 1:SceneManger.getInstance().changeScene(SceneManger.getInstance().yingxiongchangjing);break;case 2:SceneManger.getInstance().changeScene(SceneManger.getInstance().wupinchangjing);break;case 3:SceneManger.getInstance().addScene(SceneManger.getInstance().guanyuchangjing),SceneManger.getInstance().guanyuchangjing.kuangfangda()}},this)},n}(eui.Component);__reflect(zhujiemian.prototype,"zhujiemian"),window.zhujiemian=zhujiemian;